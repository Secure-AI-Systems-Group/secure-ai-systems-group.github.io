<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Title -->
        <title>
            CS 578 :: Sp25 :: Cyber-Security
        </title>

        <!-- SEO -->
        <meta name="author" content="Sanghyun Hong">
        <meta name="description" content="Trustworthy Machine Learning Oregon State University">
        <meta name="keywords" content="sanghyun hong albert Trustworthy Machine Learning oregon state university">

        <!-- Favicon -->
        <link rel="shortcut icon" href="/resources/favicon.ico" type="image/x-icon">

        <!-- Prevent js cache by Chrome -->
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />

        <!-- Bootstrap start -->
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Arial:300,400,500,700" />
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="/css/osu-fonts.css">
        <link rel="stylesheet" type="text/css" href="/css/osu-styles.css">

    </head>
    <body>

        <!-- Content -->
        <div class="container">

            <!-- Title -->
            <h2 class="title">
                <b>CS 578 :: Spring 2025 :: Cyber-Security</b>
            </h2>

            <hr noshade="" size="1">

            <!-- Top navigation bar -->
            <ul class="nav">
                <li class="nav-item">
                    <a class="nav-link" href="index.html"><h5>Home</h5></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="syllabus.html"><h5>Syllabus</h5></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="critiques.html"><h5>Critique, Presentation</h5></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="homework.html"><h5>Homework</h5></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="project.html"><h5>Project</h5></a>
                </li>
            </ul>

            <hr noshade="" size="1">

            
            <!-- Homeworks -->
            <div class="accordion" id="homeworkExample">


                <!-- HW1 -->
                <div class="card">
                    <div class="card-header" id="headingOne">
                        <button class="btn btn-link" 
                            type="button" 
                            style="color: black;"
                            data-toggle="collapse" 
                            data-target="#homework1" 
                            aria-expanded="false" 
                            aria-controls="homework1">
                            <h4>Homework 1: Your Packets Are Mine</h4>
                        </button>
                    </div>
              
                    <div id="homework1" 
                         class="collapse" 
                         aria-labelledby="headingOne"
                         data-parent="#homeworkExample">
                        <div class="card-body">

                            <!-- :: Deadlines -->
                            <h5>Important Dates</h5>
                            <ul>
                                <li><b style="color: #D73F09;">Out: 04.02.2025 09:00 AM PT</b></li>
                                <li><b style="color: #D73F09;">Due: 04.16.2025 11:59 PM PT</b></li>
                            </ul>


                            <!-- :: Introduction -->
                            <h5 style="margin-top: 20px;">Homework Overview</h5>
                            <p>
                                The learning objective of this homework is for you to understand the basics of network traffic and packet analysis. You will be required to capture <code>DNS</code> and <code>HTTP/HTTPS</code> packets using <a href="https://www.wireshark.org/" target="_blank">Wireshark</a> and analyze them.
                            </p>


                            <!-- :: Setup -->
                            <h5 style="margin-top: 20px;">Initial Setup</h5>
                            <p>
                                To begin with, you are required to install Wireshark. You need to have access to a computer that support both Wireshark and the <code>libpcap</code> library. Wireshark is available for Windows, macOS, and Linux. You can download the latest version from the official website [<a href="https://www.wireshark.org/download.html" target="_blank">link</a>]. Your operating system (OS) may have the libpcap software installed. If you face an issue with the libpcap library, you can install it as follows, depending on your OS:<br/>
                                <ul>
                                    <li>
                                        <b>Windows</b>: You can install <code>WinPcap</code> or <code>Npcap</code> [<a href="https://www.wireshark.org/download.html" target="_blank">link</a>].
                                    </li>
                                    <li>
                                        <b>Linux or MacOS</b>: You can install libpcap. [<a href="https://www.tcpdump.org/" target="_blank">link</a>].
                                    </li>
                                </ul>
                            </p>


                            <!-- :: Sample Run -->
                            <p>
                                <h5 style="margin-top: 20px;">Running Wireshark</h5>

                                When you run the Wireshark program, the Wireshark GUI shown in <a href="resources/main_wireshark.png" target="_blank">this figure (on Mac)</a> will be displayed. Initially, you can see the list of network interfaces on your computer, and a time-series diagram of the packets coming in and going out from the interface will be shown.<br/><br/>

                                Now you are ready to do a test drive!<br/>
                                <ul>
                                    <li>
                                        <b>Step 1:</b> Start Wireshark and select the network interface (e.g., eth0) you want to capture packets from. You can do this by clicking on the <code>Capture</code> menu and selecting <code>Options</code>.
                                    </li>
                                    <li>
                                        <b>Step 2:</b> Click on the <code>Start</code> button to begin capturing packets. You should see packets being displayed in the packet-listing window.
                                    </li>
                                    <li>
                                        <b>Step 3:</b> To filter the captured packets, enter a protocol name or other criteria in the packet-display filter field. For example, you can enter <code>http</code> to display only HTTP packets, as shown in <a href="resources/capture_wireshark.png" target="_blank">this figure</a>.
                                    </li>
                                    <li>
                                        <b>Step 4:</b> To stop capturing packets, click on the <code>Capture</code> menu and select <code>Stop</code>. You can also click on the <span style="color: #D73F09;">red square button</span> in the toolbar.
                                    </li>
                                    <li>
                                        <b>Step 5:</b> To save the captured packets, click on the <code>File</code> menu and select <code>Save As</code>. Choose a location and file name to save the captured packets.
                                    </li>
                                    <li>
                                        <b>Step 6:</b> To analyze the captured packets, select a packet in the packet-listing window. The details of the selected packet will be displayed in the packet-header details window and the packet-contents window.
                                    </li>
                                    <li>
                                        <b>Step 7:</b> You can expand or minimize the details of the packet by clicking on the arrowhead to the left of the protocol name in the packet-header details window. This will show you more information about the packet, such as the source and destination IP addresses, port numbers, and protocol-specific information.
                                    </li>
                                </ul>

                            </p>


                            <!-- :: Task I -->
                            <h5 style="margin-top: 20px;">Task I: Trace DNS with Wireshark</h5>

                            Capture the DNS packets generated by ordinary Web-surfing activity. You will need to analyze the captured packets and answer the following questions:<br/><br/>

                            <ul>
                                <li><b>Step 1:</b>
                                    Use <code>ipconfig</code> (Windows) / <code>ifconfig</code> (Linux, Mac) to empty the DNS cache on your host.
                                </li>
                                <li><b>Step 2:</b>
                                    Open your browser and clear your browser cache. (For Internet Explorer, go to the Tools menu, select Internet Options, then in the General tab select Delete Files.)
                                </li>
                                <li><b>Step 3:</b>
                                    Open Wireshark and enter <code>ip.addr == your_IP_address</code> into the filter, where you obtain your IP address (the IP address for the computer running Wireshark) with <code>ipconfig</code>. This filter removes all packets that neither originate nor are destined for your host.
                                </li>
                                <li><b>Step 4:</b>
                                    Start packet capture in Wireshark.
                                </li>
                                <li><b>Step 5:</b>
                                    With your browser, visit the Web page: <a href="https://www.google.com" target="_blank">https://www.google.com</a>.
                                </li>
                                <li><b>Step 6:</b>
                                    Stop packet capture.
                                </li>
                            </ul>

                            Now answer the following questions:<br/><br/>

                            <ol>
                                <li>What is the IP address of your computer?</li>
                                <li>What is the IP address of the Google web server?</li>
                                <li>How many DNS queries were generated by your web browser?</li>
                                <li>How many DNS responses were received by your web browser?</li>
                                <li>What is the port number used by your web browser to send the DNS query to the DNS server?</li>
                                <li>What is the size of the DNS query packet sent from your web browser to the DNS server?</li>
                                <li>What is the size of the DNS response packet sent from the DNS server to your browser?</li>
                            </ol>

                            
                            <!-- :: Task II -->
                            <h5 style="margin-top: 20px;">Task II: HTTP and HTTPs Protocols</h5>

                            Now we use Wireshark to capture HTTP and HTTPS packets. You will need to analyze the captured packets and answer the following questions:<br/><br/>

                            <ul>
                                <li><b>Step 1:</b>
                                    Use <code>ipconfig</code> (Windows) / <code>ifconfig</code> (Linux, Mac) to empty the DNS cache on your host.
                                </li>
                                <li><b>Step 2:</b>
                                    Open your browser and clear your browser cache. (For Internet Explorer, go to the Tools menu, select Internet Options, then in the General tab select Delete Files.)
                                </li>
                                <li><b>Step 3</b>
                                    Open Wireshark and enter <code>ip.addr == your_IP_address</code> into the filter, where you obtain your IP address (the IP address for the computer running Wireshark) with <code>ipconfig</code>. This filter removes all packets that neither originate nor are destined for your host.
                                </li>
                                <li><b>Step 4:</b>
                                    Start packet capture in Wireshark.
                                </li>
                                <li><b>Step 5:</b>
                                    With your browser, visit the website: <a href="http://relaxedgoodglowingmagic.neverssl.com/online/" target="_blank">http://relaxedgoodglowingmagic.neverssl.com/online/</a>.
                                </li>
                                <li><b>Step 6:</b>
                                    Stop packet capture.</li>
                                <li><b>Step 7:</b>
                                    Repeat Step 4-6 with the website: <a href="https://relaxedgoodglowingmagic.neverssl.com/online/" target="_blank">https://relaxedgoodglowingmagic.neverssl.com/online/</a>.
                                </li>
                            </ul>

                            Now answer the following questions:<br/><br/>

                            
                            <ul>
                                <li><b>HTTP website:</b></li>
                                <ol>
                                    <li>What is the IP address of your computer?</li>
                                    <li>What is the IP address of the <code>HTTP</code> website?</li>
                                    <li>What version of HTTP is the website running?</li>
                                    <li>What is the status code returned from the website to your browser?</li>
                                    <li>What is the port number used by your browser to send the HTTP request to your web browser?</li>
                                    <li>What is the port number used by the HTTP website to send the HTTP response to your web browser?</li>
                                    <li>What is the size of the data in the HTTP response packet sent from the HTTP website to your browser?</li>
                                </ol><br/>


                                <li><b>HTTPS website:</b></li>
                                <ol>
                                    <li>What is the IP address of your computer?</li>
                                    <li>What is the IP address of the <code>HTTPS</code> website?</li>
                                    <li>What version of TLS is the website running?</li>
                                    <li>What is the status code returned from the website to your browser?</li>
                                    <li>What is the port number used by your browser to send the HTTPS request to your web browser?</li>
                                    <li>What is the port number used by the HTTPS website to send the HTTPS response to your web browser?</li>
                                    <li>What is the size of the data in the HTTPS response packet sent from the HTTPS website to your browser?</li>
                                </ol><br/>
                            </ul>

                            <!-- :: Submit -->
                            <h5 style="margin-top: 20px;">Submission Instructions</h5>

                            Use Canvas to submit your homework. You need to make a single compressed file (<code>.tar.gz</code>) that contains your write-up as a PDF file. Your PDF write-up should contain the following things:<br/><br/>

                            <ul>
                                <li><b>Task I (5 pts)</b></li>
                                <ul>
                                    <li>Your answer to the 7 questions above.</li>
                                    <li>Your analysis: provide 2-3 sentences explaining why you see the results.</li>
                                </ul>

                                <li><b>Task II (10 pts)</b></li>
                                <ul>
                                    <li>Your answer to the 14 questions above.</li>
                                    <li>Your analysis: provide 2-3 sentences explaining why you see the results.</li>
                                </ul>
                            </ul><br/>

                        </div>
                    </div>
                </div>


                <!-- HW2 -->
                <div class="card">
                    <div class="card-header" id="headingTwo">
                        <button class="btn btn-link collapsed" 
                            type="button" 
                            style="color: black;"
                            data-toggle="collapse" 
                            data-target="#homework2" 
                            aria-expanded="true" 
                            aria-controls="homework2">
                            <h4>Homework 2: Buffer Overflow</h4>
                        </button>
                    </div>
              
                    <div id="homework2" 
                         class="collapse show" 
                         aria-labelledby="headingTwo"
                         data-parent="#homeworkExample">
                        <div class="card-body">

                            <!-- :: Deadlines -->
                            <h5>Important Dates</h5>
                            <ul>
                                <li><b style="color: #D73F09;">Out: 04.16.2025 09:00 AM PT</b></li>
                                <li><b style="color: #D73F09;">Due: 04.28.2025 11:59 PM PT</b></li>
                            </ul>


                            <!-- :: Introduction -->
                            <h5 style="margin-top: 20px;">Homework Overview</h5>
                            <p>
                                The learning objectives of this homework are for students to gain hands-on experience with <code>buffer overflow</code> attacks. These attacks exploit a buffer overrun vulnerability in a program, causing it to bypass its usual execution sequence and instead jump to alternative code (typically launching a shell!). The attack overflows the vulnerable buffer to introduce the alternative code onto the stack and modifies the return address to point to that code.
                            </p>


                            <!-- :: Setup -->
                            <h5 style="margin-top: 20px;">Initial Setup</h5>
                            <p>
                                To begin, you are required to use a Linux machine with <code>sudo</code> privileges. You should not complete this homework on a shared server or any OSU computing clusters. If you perform a buffer overflow attack in these shared environments, you will be responsible for any consequences, and the instructor will not be liable. Note that you cannot run this on a Mac or Windows laptop. While these systems support command-line environments, they do not allow you to execute buffer overflow attacks. If you do not have a Linux machine, the instructor recommends creating a virtual machine using a commodity virtualization software, such as VMWare.<br/><br/>

                                "One way to bypass the configuration hassles is to set up your own server using a popular cloud provider, Amazon Web Services (AWS). To do this, sign up for AWS, go to the AWS Console, and select EC2. Then, launch an instance, choosing the operating system <code>Ubuntu 22.04</code> and the instance type <code>t2.micro</code> (which is eligible for the free tier). You will also need to configure an SSH key and a Security Group. Once completed, you can find the server's IP address in the console. Use that IP to log in to the cloud server via your terminal.

                                <pre><code>
                                    $ ssh -i "your-aws-key" ubuntu@"your-server-ip"
                                </code></pre>

                                To run the code provided by the instructor, you will need to install a few packages, as listed below. Note that you may need to install more packages. In such cases, you can easily search the error message shown in the terminal on Google and find the answers.

                                <pre><code>
                                    $ sudo apt install cmake gcc g++ gdb
                                    $ sudo apt install vim-enhanced
                                    $ sudo apt install python3
                                </code></pre>

                                Many countermeasures, such as ASLR, have been developed to address buffer overflow vulnerabilities. Circumventing these defenses is not as easy as it may seem, so we will disable them for this homework assignment. You can do so by following these steps:

                                <pre><code>
                                    $ sudo -i
                                    # sysctl -w kernel.randomize_va_space=0
                                    # exit      // exit the sudo; our assignment should be done in the user space.
                                </code></pre>

                                <b style="color: #D73F09;">[Important Note] Once you complete the homework, be sure to turn off and delete the cloud server to avoid being charged.</b>
                            </p>


                            <!-- :: Task I -->
                            <h5 style="margin-top: 20px;">Task I: Access the (In-)accessible</h5>

                            Create a makefile, <code>Makefile</code>:
                            
                            <pre><code>
                                $ vim Makefile
                                // paste the content below
                                CC=gcc
                                CFLAGS=-g -fno-stack-protector

                                all: bof.c
                                    $(CC) -m32 -o bof bof.c $(CFLAGS)
                            </code></pre>

                            Create a vulnerable file <code>bof.c</code>, as follows:

                            <pre><code>
                                #include "stdio.h"
                                #include "stdlib.h"
                                #include "string.h"
                                #include "unistd.h"
                                
                                char *trueflag = "cs578{trueflag}";
                                char *fakeflag = "cs578{fakeflag}";
                                
                                void
                                shell(void) {
                                    setregid(getegid(), getegid());
                                    system("/bin/bash");
                                }
                                
                                void
                                process_user_input(void) {
                                    char *flag;
                                    char buff[12];
                                    char data[128];
                                
                                    // set the fake flag
                                    flag = fakeflag;
                                
                                    // load the memory locations
                                    printf("Your flag address is at %p\n", trueflag);
                                    printf("Your fakeflag is at %p\n", fakeflag);
                                    printf("Address of shell is at %p\n", &shell);
                                    printf("Currently, the flag variable has the value %p\n", flag);
                                    fgets(data, sizeof(data), stdin);
                                
                                    // copy the content directly to the buffer
                                    strncpy(buff, data, strlen(data));
                                
                                    printf("Your input was: [%s]\n", buff);
                                    printf("Your flag address is at %p\n", flag);
                                    printf("Your flag is %s\n", flag);
                                }
                                
                                int
                                main(void) {
                                    setvbuf(stdin, NULL, _IONBF, 0);
                                    setvbuf(stdout, NULL, _IONBF, 0);
                                    process_user_input();
                                }
                            </code></pre>

                            <!-- (python3 -c 'print("A" * 14 + "\x00")') | ./bof -->
                            You can now compile the bof.c file by running the <code>make</code> command. Once compiled, you are ready to exploit the buffer overflow vulnerability. The code by default, will print out the flag <code>cs578{fakeflag}</code>. Your job is to exploit the buffer overflow and force it to print out <code>cs578{trueflag}</code>.

                            
                            <!-- :: Task II -->
                            <h5 style="margin-top: 20px;">Task II: Run Malicious Code</h5>

                            Now that you are familiar with buffer overflow exploitation, the instructor has prepared a fun task for you—running an arbitrary function that the program cannot execute normally. In this case, the function is the <code>bash shell</code>! (wait what?) Use the exact same program that the Instructor provided above and work hard to get a shell.<br/><br/>

                            <span style="color: #D73F09;">Tip: Python "print" may not work in some cases, e.g., it could add some termination characters like \x00. Please look for some other ways to write the address to the buffer. The instructor would not respond to any questions regarding this tip; it is the part of the homework assignment.</span>

                            <!-- :: Submit -->
                            <h5 style="margin-top: 20px;">Submission Instructions</h5>

                            Use Canvas to submit your homework. You need to make a single compressed file (<code>.tar.gz</code>. <code>.tar</code> or <code>.zip</code>) that contains your write-up as a PDF file. Your PDF write-up should contain the followings:<br/><br/>

                            <ul>
                                <li><b>Task I (6 pts)</b></li>
                                <ul>
                                    <li>You need to provide a screenshot of your terminal showing the command and its output.</li>
                                    <li>You also need to provide a detailed explanation of how you exploit the buffer overrun to obtain the <code>trueflag</code>.</li>
                                </ul>

                                <li><b>Task II (9 pts)</b></li>
                                <ul>
                                    <li>You need to provide a screenshot of your terminal showing the command and its output.</li>
                                    <li>You also need to provide a detailed explanation of how you exploit the buffer overrun to obtain the <code>bash shell</code>.</li>
                                </ul>
                            </ul><br/>

                        </div>
                    </div>
                </div>


                <!-- HW3 -->
                <div class="card">
                    <div class="card-header" id="headingThree">
                        <button class="btn btn-link collapsed" 
                            type="button" 
                            style="color: black;"
                            data-toggle="collapse" 
                            data-target="#homework3" 
                            aria-expanded="true" 
                            aria-controls="homework3">
                            <h4>Homework 3: Cache-based Side-channel Attacks</h4>
                        </button>
                    </div>
              
                    <div id="homework3" 
                         class="collapse" 
                         aria-labelledby="headingThree"
                         data-parent="#homeworkExample">
                        <div class="card-body">

                            <!-- :: Deadlines -->
                            <h5>To be announced soon.</h5>

                        </div>
                    </div>
                </div>


                <!-- HW4 -->
                <div class="card">
                    <div class="card-header" id="headingFour">
                        <button class="btn btn-link" 
                            type="button" 
                            style="color: black;"
                            data-toggle="collapse" 
                            data-target="#homework4" 
                            aria-expanded="false" 
                            aria-controls="homework4">
                            <h4>Homework 4: Prompt-based Jailbreaking Attacks</h4>
                        </button>
                    </div>
              
                    <div id="homework4" 
                         class="collapse" 
                         aria-labelledby="headingFour"
                         data-parent="#homeworkExample">
                        <div class="card-body">

                            <!-- :: Deadlines -->
                            <h5>To be announced soon.</h5>

                        </div>
                    </div>
                </div>

            </div>

            <hr noshade="" size="1">


            <!-- Footer -->
            <footer class="footer">
                <div class="container text-center">
                  <span class="text-muted">© Sanghyun Hong: 2025-Present.</span>
                </div>
            </footer>

        </div>

        <!-- Optional Javascript -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </body>
</html>
